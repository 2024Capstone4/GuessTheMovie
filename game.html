<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess the Movie Rating</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles2.css">
</head>
<body>
    <div class="container">
        <h1>Time to test your skills <span id="username"></span>!</h1>
        <div id="moviePosterContainer">
            <img id="moviePoster" src="https://image.tmdb.org/t/p/w500/rULWuutDcN5NvtiZi4FRPzRYWSh.jpg" alt="Movie Poster">
        </div>
        <div id="guessingArea">
            <p style="font-size: 30px">Guess the different ratings of the following film:</p>
            <input type="number" id="guess1" placeholder="Critic"><br><br>
            <input type="number" id="guess2" placeholder="Audience"><br><br>
            <input type="number" id="guess3" placeholder="IMDB"><br><br>
            <button onclick="checkGuesses()">Check Guesses</button>
            <button onclick="nextPoster()">Next</button> <!-- Added Next button -->
        </div>
        <p id="result"></p>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get('username');
        document.getElementById('username').textContent = username;

        // Array of objects containing movie poster URLs and scores
        const moviesData = [
            {
                posterUrl: "https://image.tmdb.org/t/p/w500/tMefBSflR6PGQLv7WvFPpKLZkyk.jpg",
                scores: [12, 57, 38] // Scores for Madame Web
            },
            {
                posterUrl: "https://image.tmdb.org/t/p/w500/bXi6IQiQDHD00JFio5ZSZOeRSBh.jpg",
                scores: [44, 67, 62] //roadhouse 
            },
            {
                posterUrl: "https://image.tmdb.org/t/p/w500/ccJpK0rqzhQeP7Mrs2uKqObFY4L.jpg",
                scores: [51, 96, 72] //creation of the gods
            },
            // Add more movie data objects here
        ];

        // Function to display next movie poster randomly
        function nextPoster() {
            // Check if there are movie data available
            if (moviesData.length > 0) {
                // Pick a random index from the moviesData array
                const randomIndex = Math.floor(Math.random() * moviesData.length);
                // Get the movie data object at the random index
                const selectedMovie = moviesData[randomIndex];
                // Set the src attribute of the movie poster element to the selected poster URL
                document.getElementById('moviePoster').src = selectedMovie.posterUrl;
                // Store the scores as data attributes for later use
                document.getElementById('moviePoster').dataset.scores = JSON.stringify(selectedMovie.scores);
            } else {
                console.error('No movie data available.');
            }
        }

        // Function to check user's guesses
        function checkGuesses() {
            const guess1 = parseInt(document.getElementById('guess1').value);
            const guess2 = parseInt(document.getElementById('guess2').value);
            const guess3 = parseInt(document.getElementById('guess3').value);
            const actualScores = JSON.parse(document.getElementById('moviePoster').dataset.scores);

            // Calculate the difference between actual and guessed scores
            const difference1 = Math.abs(actualScores[0] - guess1);
            const difference2 = Math.abs(actualScores[1] - guess2);
            const difference3 = Math.abs(actualScores[2] - guess3);

            // Calculate the total difference
            const totalDifference = (difference1 + difference2 + difference3) / 3; // Average difference

            // Display the percentage of closeness
            const percentCloseness = 100 - totalDifference;
            document.getElementById('result').textContent = `You were ${percentCloseness.toFixed(2)}% close to the correct scores.`;

            // Clear the input fields
            document.getElementById('guess1').value = '';
            document.getElementById('guess2').value = '';
            document.getElementById('guess3').value = '';
        }
    </script>
</body>
</html>

</body>
</html>
